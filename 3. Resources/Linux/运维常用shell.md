
# netstat

          ┌──────────────────────────────────────┐
          │        netstat 常用命令速查图         │
          └──────────────────────────────────────┘

基础选项：
    -a      显示所有连接（含监听端口）
    -t      仅显示 TCP
    -u      仅显示 UDP
    -l      仅显示监听端口
    -n      以数字显示 IP/端口（不解析域名）
    -p      显示 PID/进程名（需 root）
    -r      显示路由表
    -i      显示网络接口信息
    -s      协议统计信息

常用组合：
1. 查看所有监听的 TCP/UDP 端口（数字形式）：
    netstat -tuln

2. 查看监听端口及对应进程：
    sudo netstat -tunlp

3. 查看所有 TCP 连接：
    netstat -ant

4. 查看路由表：
    netstat -rn

5. 查找某个端口的进程：
    sudo netstat -tunlp | grep 8080

6. 统计已建立连接数：
    netstat -ant | grep ESTABLISHED | wc -l

7. 统计各状态 TCP 连接：
    netstat -ant | awk '{print $6}' | sort | uniq -c

持续监控：
    watch -n 1 netstat -ant


# lsof

好的，这里给你一个 **lsof 常用命令速查图的文字版**，方便你在 Shell 下快速查找用法。

---

## **lsof 常用命令速查表**

### **1. 基本用法**

| 命令         | 说明                             |
| ---------- | ------------------------------ |
| `lsof`     | 显示当前系统所有被打开的文件（包括网络套接字、设备、目录等） |
| `lsof -n`  | 不解析 IP 为域名（显示速度更快）             |
| `lsof -P`  | 不将端口号转换为服务名（显示端口数字）            |
| `lsof -nP` | 不解析域名且显示端口数字（网络分析常用）           |
|            |                                |

---

### **2. 按条件过滤**

|命令|说明|
|---|---|
|`lsof -u 用户名`|查看某用户打开的文件|
|`lsof -p PID`|查看指定进程打开的文件|
|`lsof -i`|显示所有网络连接|
|`lsof -i:80`|查看占用 80 端口的进程|
|`lsof -iTCP`|查看所有 TCP 连接|
|`lsof -iUDP`|查看所有 UDP 连接|
|`lsof /path/to/file`|查看使用该文件的进程|
|`lsof +D /path/to/dir`|查看某目录下被打开的文件（递归）|

---

### **3. 组合常用命令**

1. **查看某端口的进程**
    
    ```bash
    lsof -i:8080
    ```
    
2. **强制杀掉占用某端口的进程**
    
    ```bash
    kill -9 $(lsof -t -i:8080)
    ```
    
3. **查看某用户的网络连接**
    
    ```bash
    lsof -u username -i
    ```
    
4. **实时查看网络端口活动**
    
    ```bash
    watch -n 1 "lsof -i -nP"
    ```
    
5. **查看进程占用的文件**
    
    ```bash
    lsof -p 1234
    ```
    

---

### **4. 参数速查**

|参数|作用|
|---|---|
|`-i`|网络连接（可加端口号或协议过滤）|
|`-n`|不解析域名|
|`-P`|不解析端口号|
|`-u`|按用户过滤|
|`-p`|按 PID 过滤|
|`+D`|递归查看目录内文件|
|`-t`|只输出进程 PID（常配合 `kill` 使用）|

---

如果你需要，我可以帮你把这个 **lsof 命令速查表画成和刚才 netstat 一样的彩色结构图**，方便直接收藏到桌面。这样你就能把 `netstat` 和 `lsof` 两张图配套使用。  
你要我帮你画成彩色版吗？